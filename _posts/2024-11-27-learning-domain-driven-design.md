---
layout: post
title: 도메인 주도 설계 첫걸음
categories: book
tags: [book, software, architecture]
excerpt: 책을 읽고 정리한 내용입니다.
---

[도메인 주도 설계 첫걸음](https://www.yes24.com/Product/Goods/109708596) 책을 읽고 정리한 내용입니다.

## 1. 비즈니스 도메인 분석하기 

조직의 비즈니스 전략과 소프트웨어를 만들면서 얻고자 하는 가치를 이해해야 한다.

### 비즈니스 도메인이라?

회사가 고객에게 제공하는 서비스를 말한다. 예를 들면 스타벅스는 커피로 가장 잘 알려져 있다. 

### 하위 도메인(subdomain)이란?

비즈니스 도메인의 목표를 달성하기 위해 기업은 여러 가지 하위 도메인을 운영해야 한다. 하위 도메인은 비즈니스 활동이 세분화된 영역이다. 예를 들어, 스타벅스는 커피로 가장 잘 알려져 있지만, 커피를 만드는 일 외에 좋은 위치의 부동산을 구매하거나 임대하고, 직원을 고용하고, 재정을 관리해야 한다. 이러한 하위 도메인 중 어느것도 자체적으로 수익을 낼 수는 없다. 

하위 도메인 유형: 핵심, 일반, 지원의 세 가지 유형으로 구분
  - 핵심 하위 도메인(core subdomain): 경쟁업체와 다르게 수행하고 있는 것
    - 예: 구글 애즈(Google Ads)/비즈니스 도메인 - 순위 알고리즘/핵심 하위 도메인 (우수한 검색 결과를 제공하는 능력은 트래픽을 유도하는 요소이며, 결과적으로 광고 플랫폼의 중요한 구성요소가 됨)
    - 복잡성: 구현하기 쉬운 핵심 하위 도메인은 일시적인 경쟁 우위만 제공한다. 따라서 핵심 하위 도메인은 자연스럽게 복잡해진다. 회사의 핵심 비즈니스는 높은 진입장벽이 있어야 한다. 경쟁사가 회사의 솔루션을 모방하거나 복제하기가 어려워야 한다.
    - 경쟁 우위의 원천: 핵심 하위 도메인에 반드시 기술이 들어가야 하는 것은 아님을 알아야 한다. 회사의 경쟁 우위는 다양한 원천에서 나올 수 있다.
  - 일반 하위 도메인(generic subdomain): 모든 회사가 같은 방식으로 수행하는 비즈니스 활동
    - 예: 사용자를 인증하고 권한을 부여하는 작업
    - 핵심 하위 도메인과 마찬가지로 복잡하고 구현하기 어렵다. 그러나 일반 하위 도메인은 회사에 경쟁력을 제공하지 않는다. 이미 실무에서 검증된 솔루션으로 널리 이용 가능하며, 모든 회사에서 사용하고 있어서 더 이상 혁신이나 최적화가 필요 없다.
  - 지원 하위 도메인(supporting subdomain): 회사의 비즈니스를 지원하는 활동
    - 예: 광고 매칭, 최적화를 핵심 하위 도메인으로 갖고 있는 온라인 광고 회사 - 배너와 랜딩 페이지 같은 자료를 물리적으로 저장하고 인덱싱하는 시스템/지원 하위 도메인
    - 지원 하위 도메인의 비즈니스 로직은 대부분 대부분 데이터 입력 화면과 ETL(extract, transform, load; 추출, 변환, 로드) 작업과 유사하다. 소위 말하는 CRUD 인터페이스를 말한다.

하위 도메인 비교
- 핵심 하위 도메인과 지원 하위 도메인 구별: 하위 도메인을 부업으로 전환할 수 있는지 물어보자. 기꺼이 비용을 지불할 의사가 있는가? 그렇다면 핵심 하위 도메인이다. 
- 일반 하위 도메인과 지원 하위 도메인 구별: 외부 솔루션을 연동하는 것보다 자체 솔루션을 구현하는 것이 더 간단하고 저렴한가? 그렇다면 지원 하위 도메인이다.

솔루션 전략
- 기업이 해당 비즈니스 도메인에서 일하려면 하위 도메인 모두가 필요하다.
- 핵심 하위 도메인은 사내에서 구현되어야 한다. 핵심 하위 도메인은 솔루션을 구매하거나 외부에서 도입할 수 없다. 그럴 경우 경쟁업체들이 똑같이 할 수 있기 때문에 경쟁 우위 개념을 약화시킬 것이다. 또한 핵심 하위 도메인 구현을 하청하는 것도 현명하지 않다. 조직의 가장 숙련된 인재는 핵심 하위 도메인에서 일하도록 업무가 할당되어야 한다. 핵심 하위 도메인의 요구사항은 자주 그리고 지속적으로 변경될 것으로 예상되므로 솔루션은 유지보수가 가능하고 쉽게 개선될 수 있어야 한다. 
- 일반 하위 도메인을 사내에서 구현하는 데 시간과 노력을 투자하는 것보다 이미 만들어진 제품을 구입하거나 오픈소스 솔루션을 채택하는 것이 비용 면에서 더 효율적이다.
- 지원 하위 도메인 구현은 비즈니스 로직이 단순하고 변경의 빈도가 적기 때문에 원칙을 생략하고 적당히 진행하기 쉽다. 아주 짧은 주기로 신속한 애플리케이션 개발(RAD: rapid application development) 프레임워크를 사용해서 우발적 복잡성(accidental complexity) 없이 비즈니스 로직을 구현하기에 충분하다.

### 도메인 분석 예제

Gigmaster: 티켓 판매 및 유통 회사다. 모바일 앱은 사용자의 음악 라이브러리, 스트리밍 서비스 계정, 소셜 미디어 프로필을 분석하여 사용자가 관심을 가질 만한 주변의 공연 정보를 찾아낸다. 사용자의 개인정보는 암호화된다. 또한 추천 알고리즘은 익명 데이터만 사용한다. Gigmaster를 통해 티켓을 구매하지 않았더라도 사용자가 과거에 참석한 공연 정보를 기록할 수 있다.

- 비즈니스 도메인: 티켓 판매
- 하위 도메인
  - 핵심 하위 도메인: 추천 엔진, 데이터 익명화, 모바일 앱
  - 일반 하위 도메인: 암호화, 회계, 정산, 인증 및 권한 부여
  - 지원 하위 도메인: 음악 스트리밍 서비스와 연동, 소셜 네트워크 연동, 참석 공연 모듈

## 2. 도메인 지식 찾아내기

### 커뮤니케이션

소프트웨어 프로젝트가 실패하는 이유에 대한 연구에서 효과적인 커뮤니케이션이 지식 공유와 프로젝트 성공에 필수라는 것을 밝혀냈다. 

### 유비쿼터스 언어랑 무엇인가?

효과적으로 소통하기 위해 변환에 의존하지 말고 같은 언어를 사용하는 것이다. 비즈니스 도메인을 설명하기 위한 단일화된 언어 체계가 유비쿼터스 언어다.

### 비즈니스 도메인 모델

효과적인 모델링: 

